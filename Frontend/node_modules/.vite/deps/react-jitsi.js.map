{
  "version": 3,
  "sources": ["../../react-jitsi/src/defaults.tsx", "../../react-jitsi/src/utils.ts", "../../react-jitsi/src/Jitsi.tsx"],
  "sourcesContent": ["import React from 'react'\nimport * as Type from './types'\n\nexport const Loader = (): React.ReactElement => <div>Loading meeting...</div>\n\nexport const Props: Type.Props = {\n    domain: 'meet.jit.si',\n    roomName: (Math.random() + 0.48151642).toString(36).substring(2),\n}\n\nexport const ContainerStyle: React.CSSProperties = {\n    width: '800px',\n    height: '400px',\n}\n\nexport const FrameStyle = (loading: boolean): React.CSSProperties => ({\n    display: loading ? 'none' : 'block',\n    width: '100%',\n    height: '100%',\n})\n", "export const importJitsiApi = (): Promise<void> => new Promise(async (resolve) => {\n    if(window.JitsiMeetExternalAPI) {\n        resolve(window.JitsiMeetExternalAPI)\n    } else {\n        const head = document.getElementsByTagName(\"head\")[0];\n        const script = document.createElement(\"script\"); \n\n        script.setAttribute(\"type\", \"text/javascript\");\n        script.setAttribute(\"src\", \"https://meet.jit.si/external_api.js\");\n\n        head.addEventListener(\"load\", function(event: any) {\n            if (event.target.nodeName === \"SCRIPT\") {\n                resolve(window.JitsiMeetExternalAPI)\n            }\n        }, true);\n\n        head.appendChild(script); \n    }\n})", "import React, { useState, useEffect, useRef } from 'react'\nimport { Props, JitsiMeetAPIOptions } from './types'\nimport * as Default from './defaults'\nimport { importJitsiApi } from './utils'\n\nconst Jitsi: React.FC<Props> = (props: Props) => {\n    const {\n        containerStyle,\n        frameStyle,\n        loadingComponent,\n        onAPILoad,\n        onIframeLoad,\n        domain,\n        roomName,\n        password,\n        displayName,\n        config,\n        interfaceConfig,\n        noSSL,\n        jwt,\n        devices,\n        userInfo,\n    } = { ...Default.Props, ...props }\n\n    const [loading, setLoading] = useState(true)\n    const ref = useRef<HTMLDivElement | null>(null)\n\n    const Loader = loadingComponent || Default.Loader\n\n    const startConference = (JitsiMeetExternalAPI: any): void => {\n\n        try {\n\n            console.log('interfaceConfig', interfaceConfig);\n            \n\n            const options: JitsiMeetAPIOptions = {\n                roomName,\n                parentNode: ref.current,\n                configOverwrite: config,\n                interfaceConfigOverwrite: interfaceConfig,\n                noSSL,\n                jwt,\n                onLoad: onIframeLoad,\n                devices,\n                userInfo,\n            }\n\n            const api = new JitsiMeetExternalAPI(domain, options)\n\n            if (!api) throw new Error('Failed to create JitsiMeetExternalAPI istance')\n\n            if (onAPILoad) onAPILoad(api)\n\n            api.addEventListener('videoConferenceJoined', () => {\n\n                setLoading(false)\n\n                api.executeCommand('displayName', displayName)\n\n                if (domain === Default.Props.domain && password)\n                    api.executeCommand('password', password)\n\n            })\n\n            /** \n             * If we are on a self hosted Jitsi domain, we need to become moderators before setting a password\n             * Issue: https://community.jitsi.org/t/lock-failed-on-jitsimeetexternalapi/32060\n             */\n            api.addEventListener('participantRoleChanged', (e: { id: string; role: string }) => {\n\n                if (domain !== Default.Props.domain && password && e.role === 'moderator')\n                    api.executeCommand('password', password)\n\n            })\n\n        } catch (error) { console.error('Failed to start the conference', error) }\n\n    }\n\n    useEffect(() => { \n        importJitsiApi().then(jitsiApi => {\n            startConference(jitsiApi);\n        }).catch(err => {\n            console.error('Jitsi Meet API library not loaded.', err)\n        })\n    }, [])\n\n    return (\n        <div id='react-jitsi-container' style={{ ...Default.ContainerStyle, ...containerStyle }}>\n            {loading && <Loader />}\n            <div id='react-jitsi-frame' style={{ ...Default.FrameStyle(loading), ...frameStyle }} ref={ref} />\n        </div>\n    )\n}\n\nexport default Jitsi\n"],
  "mappings": "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",
  "names": ["Loader", "React", "Props", "domain", "roomName", "Math", "random", "toString", "substring", "ContainerStyle", "width", "height", "FrameStyle", "loading", "display", "importJitsiApi", "Promise", "resolve", "window", "JitsiMeetExternalAPI", "head", "document", "getElementsByTagName", "script", "createElement", "setAttribute", "addEventListener", "event", "target", "nodeName", "appendChild", "Jitsi", "props", "Default", "containerStyle", "frameStyle", "loadingComponent", "onAPILoad", "onIframeLoad", "password", "displayName", "config", "interfaceConfig", "noSSL", "jwt", "devices", "userInfo", "useState", "setLoading", "ref", "useRef", "startConference", "console", "log", "options", "parentNode", "current", "configOverwrite", "interfaceConfigOverwrite", "onLoad", "api", "Error", "executeCommand", "e", "role", "error", "useEffect", "then", "jitsiApi", "err", "id", "style"]
}
